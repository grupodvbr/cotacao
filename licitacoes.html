<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LICITAR • Painel</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

<!-- XLSX -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<style>
:root {
  --bg: #f4f6fa;
  --azul: #0b1e39;
  --azul-2: #193055;
  --card: #ffffff;
  --ok: #16a34a;
  --danger: #dc2626;
  --muted: #6b7280;
  --shadow: 0 10px 28px rgba(0,0,0,.12);
  --radius: 14px;
}
* { box-sizing:border-box; margin:0; padding:0; font-family:'Inter',sans-serif; }
body { background:var(--bg); padding:28px; }

/******** LOGIN *********/
#loginBox {
  max-width:380px; margin:80px auto; background:#fff; padding:28px;
  border-radius:16px; box-shadow:0 8px 30px rgba(0,0,0,.15);
}
#loginBox h2 { text-align:center; margin-bottom:18px; color:var(--azul); }
#loginBox input {
  width:100%; padding:14px; border-radius:12px; border:1px solid #d0d4da;
  margin-bottom:12px;
}
#loginBox button {
  width:100%; padding:14px; border-radius:12px;
  background:var(--azul); border:none; color:#fff; cursor:pointer;
  font-size:16px; font-weight:700;
}
#loginBox button:hover { background:var(--azul-2); }

/******** PAINEL *********/
.topo { display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; }
.titulo { color:var(--azul); font-size:28px; font-weight:700; }

.input { padding:12px; border-radius:12px; border:1px solid #d0d4da; width:280px; }
.btn { padding:12px 16px; border-radius:12px; cursor:pointer; border:none; font-weight:700; }
.btn-primary { background:var(--azul); color:#fff; }
.btn-primary:hover { background:var(--azul-2); }
.btn-lite { background:#fff; border:1px solid #d0d4da; }
.btn-danger { background:var(--danger); color:#fff; }

.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:18px; }
.card { background:#fff; padding:18px; border-radius:var(--radius); box-shadow:var(--shadow); border-left:5px solid var(--azul); }
.card h3 { font-size:18px; margin-bottom:6px; }

.status { padding:6px 10px; border-radius:8px; font-size:12px; font-weight:700; margin-top:10px; display:inline-block; }
.st-PENDENTE { background:#fff3cd; color:#a15e00; }
.st-FUTURA { background:#dbeafe; color:#1e40af; }
.st-EM_ANDAMENTO { background:#fef9c3; color:#854d0e; }
.st-FINALIZADA { background:#dcfce7; color:#166534; }
.st-SUSPENSA { background:#ffe4e6; color:#9f1239; }

/******** MODAIS *********/
.modal {
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:none; justify-content:center; align-items:center;
  padding:20px; z-index:9999; opacity:0; transition:.2s;
}
.modal .content {
  background:#fff; padding:20px; border-radius:16px;
  width:100%; max-width:900px;
}

/******** OVERLAY *********/
#overlay {
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:none; justify-content:center; align-items:center; z-index:99999;
}
#overlay .box {
  background:#fff; padding:24px; border-radius:16px; font-size:16px;
  font-weight:700; color:var(--azul); box-shadow:var(--shadow);
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginBox">
  <h2>ACESSO RESTRITO</h2>
  <input id="loginEmail" placeholder="Email" />
  <input id="loginSenha" type="password" placeholder="Senha" />
  <button onclick="login()">Entrar</button>
</div>

<!-- OVERLAY -->
<div id="overlay"><div class="box">Enviando…</div></div>

<!-- PAINEL (ESCONDIDO ATÉ LOGIN) -->
<div id="painel" style="display:none;">
  <div class="topo">
    <div class="titulo">LICITAR • Painel</div>
    <div style="display:flex; gap:10px">
      <input id="busca" class="input" placeholder="BUSCAR..." />
      <button id="btnNovaLicitacao" class="btn btn-primary">+ Nova</button>
      <button onclick="logout()" class="btn btn-danger">Sair</button>
    </div>
  </div>

  <div id="filtros" style="display:flex; gap:10px; margin-bottom:15px">
    <button class="btn-lite chip ativo" data-st="TODOS">Todos</button>
    <button class="btn-lite chip" data-st="PENDENTE">Pendente</button>
    <button class="btn-lite chip" data-st="FUTURA">Futura</button>
    <button class="btn-lite chip" data-st="EM ANDAMENTO">Em andamento</button>
    <button class="btn-lite chip" data-st="FINALIZADA">Finalizada</button>
    <button class="btn-lite chip" data-st="SUSPENSA">Suspensa</button>
  </div>

  <div id="lista" class="grid">Carregando...</div>
</div>

<!-- MODAL: LICITAÇÃO -->
<div class="modal" id="modalLicitacao">
  <div class="content">
    <h3 id="tituloModalLicitacao">Nova Licitação</h3>

    <div class="field">
      <label>INSTITUIÇÃO</label>
      <div style="display:flex; gap:8px; align-items:center">
        <select id="selInstituicao"></select>
        <button id="btnAddEmpresa" class="btn btn-lite">+</button>
      </div>
    </div>

    <div class="field"><label>DATA</label><input id="inpData" placeholder="DD/MM/AAAA" /></div>
    <div class="field"><label>VALOR</label><input id="inpValor" placeholder="R$ 0,00" /></div>
    <div class="field"><label>CRITÉRIO</label><input id="inpCriterio" /></div>
    <div class="field"><label>MODO</label><input id="inpModo" /></div>

    <div class="field">
      <label>STATUS</label>
      <select id="selStatus">
        <option>PENDENTE</option>
        <option>FUTURA</option>
        <option>EM ANDAMENTO</option>
        <option>FINALIZADA</option>
        <option>SUSPENSA</option>
      </select>
    </div>

    <button id="btnSalvarLicitacao" class="btn btn-primary" style="width:100%">Salvar</button>
    <button class="btn btn-lite" data-close="#modalLicitacao" style="width:100%; margin-top:10px">Fechar</button>
  </div>
</div>

<!-- MODAL: EMPRESAS -->
<div class="modal" id="modalEmpresa">
  <div class="content">
    <h3>Nova Empresa</h3>
    <input id="empRazao" placeholder="Razão Social" class="input" />
    <input id="empCnpj" placeholder="00.000.000/0000-00" class="input" />
    <input id="empUf" placeholder="UF" class="input" />

    <button id="btnSalvarEmpresa" class="btn btn-primary" style="width:100%">Salvar</button>
    <button class="btn btn-lite" data-close="#modalEmpresa" style="width:100%; margin-top:10px">Fechar</button>
  </div>
</div>

<!-- MODAL: ITENS -->
<div class="modal" id="modalItens">
  <div class="content">
    <h3>Itens da Licitação <span id="spCodigoItens"></span></h3>

    <div style="display:flex; gap:10px; margin-bottom:10px; flex-wrap:wrap">
      <button id="btnAddItem" class="btn btn-ok">+ Item</button>

      <label class="btn btn-lite">
        Importar
        <input type="file" id="inpImportar" accept=".xlsx,.xls,.csv" style="display:none" />
      </label>

      <button id="btnExportar" class="btn btn-lite">Excel</button>
      <button id="btnGerarPdf" class="btn btn-lite">PDF</button>
    </div>

    <table id="tblItens" style="width:100%; font-size:13px">
      <thead>
        <tr>
          <th>TR</th><th>ESPECIFICAÇÃO</th><th>MARCA</th><th>MODELO</th>
          <th>UN</th><th>MAX</th><th>MIN</th><th>VALOR</th><th>GARANTIA</th><th>AÇÕES</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h4 style="margin-top:20px">Cadastrar Item</h4>
    <div style="display:grid; grid-template-columns:repeat(5,1fr); gap:10px">
      <input id="itTR" placeholder="TR" />
      <input id="itESP" placeholder="ESPECIFICAÇÃO" />
      <input id="itMARCA" placeholder="MARCA" />
      <input id="itMODELO" placeholder="MODELO" />
      <input id="itUN" placeholder="UN" />

      <input id="itMAX" placeholder="MAX" />
      <input id="itMIN" placeholder="MIN" />
      <input id="itVLR" placeholder="VALOR" />
      <input id="itGAR" placeholder="GARANTIA" />
    </div>

    <button id="btnSalvarItem" class="btn btn-ok" style="width:100%; margin-top:12px">Salvar Item</button>
    <button class="btn btn-lite" data-close="#modalItens" style="width:100%; margin-top:10px">Fechar</button>
  </div>
</div>

<!-- PRÉVIA IMPORTAÇÃO -->
<div class="modal" id="modalPreview">
  <div class="content">
    <h3>Prévia</h3>
    <table id="tblPreview" style="width:100%; font-size:13px"></table>
    <button id="btnConfirmarImport" class="btn btn-primary" style="width:100%; margin-top:10px">Confirmar</button>
    <button class="btn btn-lite" data-close="#modalPreview" style="width:100%; margin-top:10px">Fechar</button>
  </div>
</div>

<script>
/***********************
 *  CONFIGURAÇÃO
 ***********************/
const API = "https://script.google.com/macros/s/AKfycbzKyN0FAdv-i7ObZRdDNVnCaieLpai1sQOAytVfH4BLf_KIOuWR3zpfh_-gDYK_0f5U/exec"; // TROQUE AQUI

let estado = {
  empresas: [],
  licitacoes: [],
  itens: [],
  preview: [],
  licAtual: null,
  filtro: "TODOS",
  busca: ""
};

/***********************
 *  ATAJOS
 ***********************/
const $ = s => document.querySelector(s);
const $$ = s => [...document.querySelectorAll(s)];

function show(id){
  $(id).style.display = "flex";
  setTimeout(()=> $(id).style.opacity = 1, 10);
}
function hide(id){
  $(id).style.opacity = 0;
  setTimeout(()=> $(id).style.display = "none", 200);
}
function overlay(s=true){ $("#overlay").style.display = s ? "flex" : "none"; }

/***********************
 *  LOGIN
 ***********************/
function login(){
  const email = $("#loginEmail").value.trim();
  const senha = $("#loginSenha").value.trim();

  if(email !== "admin@grupodv.com" || senha !== "1234"){
    alert("Acesso negado.");
    return;
  }

  $("#loginBox").style.display = "none";
  $("#painel").style.display = "block";
  localStorage.setItem("logado", "1");
}
function logout(){
  localStorage.removeItem("logado");
  location.reload();
}

document.addEventListener("DOMContentLoaded", ()=>{
  if(localStorage.getItem("logado")==="1"){
    $("#loginBox").style.display = "none";
    $("#painel").style.display = "block";
  }
});

/***********************
 *  INICIALIZAÇÃO
 ***********************/
document.addEventListener("DOMContentLoaded", ()=>{
  carregarEmpresas();
  carregarLicitacoes();
  configurarEventosGlobais();
});

/***********************
 *  EVENTOS
 ***********************/
function configurarEventosGlobais(){
  $("#btnNovaLicitacao").onclick = abrirNovaLicitacao;
  $("#btnAddEmpresa").onclick = ()=> show("#modalEmpresa");
  $("#btnSalvarEmpresa").onclick = salvarEmpresa;
  $("#btnSalvarLicitacao").onclick = salvarLicitacao;
  $("#btnSalvarItem").onclick = salvarItem;

  $("#inpImportar").onchange = previewImportacao;
  $("#btnConfirmarImport").onclick = confirmarImportacao;

  $("#btnExportar").onclick = ()=> exportarItens(estado.licAtual);
  $("#btnGerarPdf").onclick = ()=> gerarPdf(estado.licAtual);

  $("#busca").oninput = e=>{
    estado.busca = e.target.value.toUpperCase();
    renderLista();
  };

  $$(".chip").forEach(c=>{
    c.onclick = ()=>{
      $$(".chip").forEach(x=>x.classList.remove("ativo"));
      c.classList.add("ativo");
      estado.filtro = c.dataset.st;
      renderLista();
    };
  });

  document.addEventListener("click", e=>{
    const c = e.target.getAttribute("data-close");
    if(c) hide(c);
  });
}

/*******************************************
 *  CARREGAR EMPRESAS / LICITAÇÕES
 *******************************************/
async function carregarEmpresas(){
  const r = await fetch(`${API}?action=listEmpresas`);
  const j = await r.json();
  estado.empresas = j.empresas || [];
  atualizarSelectEmpresas();
}
async function carregarLicitacoes(){
  const r = await fetch(`${API}?action=listLicitacoes`);
  const j = await r.json();
  estado.licitacoes = j.licitacoes || [];
  renderLista();
}

function atualizarSelectEmpresas(){
  $("#selInstituicao").innerHTML = estado.empresas
    .map(e=>`<option value="${e.codigo}">${e.nome}</option>`)
    .join("");
}

/*******************************************
 *  EMPRESAS
 *******************************************/
async function salvarEmpresa(){
  const nome = $("#empRazao").value.trim();
  const cnpj = $("#empCnpj").value.trim();
  const uf   = $("#empUf").value.trim().toUpperCase();

  if(!nome) return alert("Informe o nome.");

  overlay(true);
  const r = await fetch(API,{
    method:"POST",
    body:JSON.stringify({action:"addEmpresa",nome,cnpj,uf})
  });
  overlay(false);

  const j = await r.json();
  if(j.error) return alert(j.error);

  hide("#modalEmpresa");
  carregarEmpresas();
}

/*******************************************
 *  LICITAÇÕES
 *******************************************/
function abrirNovaLicitacao(){
  estado.licAtual = null;
  $("#tituloModalLicitacao").innerText = "Nova Licitação";

  $("#inpData").value = "";
  $("#inpValor").value = "";
  $("#inpCriterio").value = "";
  $("#inpModo").value = "";
  $("#selStatus").value = "PENDENTE";

  show("#modalLicitacao");
}

function editarLicitacao(codigo){
  const l = estado.licitacoes.find(x=>x.codigo===codigo);
  if(!l) return;

  estado.licAtual = codigo;

  $("#tituloModalLicitacao").innerText = "Editar Licitação";

  $("#selInstituicao").value = l.instCode;
  $("#inpData").value        = l.dataSessaoBR || "";
  $("#inpValor").value       = l.valorBR || "";
  $("#inpCriterio").value    = l.criterio || "";
  $("#inpModo").value        = l.modo || "";
  $("#selStatus").value      = l.status;

  show("#modalLicitacao");
}

async function salvarLicitacao(){
  const instCode      = $("#selInstituicao").value;
  const instituicao   = $("#selInstituicao").selectedOptions[0].textContent.trim();
  const dataSessaoBR  = $("#inpData").value.trim();
  const valorBR       = $("#inpValor").value.trim();
  const criterio      = $("#inpCriterio").value.trim();
  const modo          = $("#inpModo").value.trim();
  const status        = $("#selStatus").value.trim();

  if(!instCode) return alert("Selecione empresa.");
  if(!dataSessaoBR) return alert("Informe a data.");
  if(!valorBR) return alert("Informe o valor.");

  overlay(true);
  const r = await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      action: estado.licAtual ? "updateLicitacao" : "addLicitacao",
      codigo: estado.licAtual,
      instCode, instituicao, dataSessaoBR, valorBR,
      criterio, modo, status
    })
  });
  overlay(false);

  const j = await r.json();
  if(j.error) return alert(j.error);

  hide("#modalLicitacao");
  carregarLicitacoes();
}

async function excluirLicitacao(codigo){
  if(!confirm("Excluir definitivamente?")) return;

  overlay(true);
  const r = await fetch(API,{
    method:"POST",
    body:JSON.stringify({action:"deleteLicitacao",codigo})
  });
  overlay(false);

  const j = await r.json();
  if(j.error) return alert(j.error);

  carregarLicitacoes();
}

/*******************************************
 *  LISTA
 *******************************************/
function renderLista(){
  const lista = $("#lista");
  const busca = estado.busca.toUpperCase();
  const filtro = estado.filtro;

  const dados = estado.licitacoes.filter(l=>{
    const okFiltro = filtro==="TODOS" || l.status===filtro;
    const okBusca = l.instituicao.toUpperCase().includes(busca)
                 || l.codigo.toUpperCase().includes(busca);
    return okFiltro && okBusca;
  });

  if(!dados.length){
    lista.innerHTML = `<div style="grid-column:1/-1;color:#666">Nenhuma encontrada.</div>`;
    return;
  }

  lista.innerHTML = dados.map(l=>`
    <div class="card">
      <h3>${l.instituicao}</h3>
      <small>Código <b>${l.codigo}</b></small>
      <div>Data: ${l.dataSessaoBR}</div>
      <div>Valor: ${l.valorBR}</div>
      <div>Critério: ${l.criterio}</div>
      <div>Modo: ${l.modo}</div>

      <div class="status st-${l.status.replace(/ /g,"_")}">${l.status}</div>

      <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap">
        <button class="btn btn-ok" onclick="abrirItens('${l.codigo}')">Itens</button>
        <button class="btn btn-lite" onclick="editarLicitacao('${l.codigo}')">Editar</button>
        <button class="btn btn-danger" onclick="excluirLicitacao('${l.codigo}')">Excluir</button>
        <button class="btn btn-lite" onclick="exportarItens('${l.codigo}')">Excel</button>
        <button class="btn btn-lite" onclick="gerarPdf('${l.codigo}')">PDF</button>
      </div>
    </div>
  `).join("");
}

/*******************************************
 *  ITENS
 *******************************************/
async function abrirItens(codigo){
  estado.licAtual = codigo;
  $("#spCodigoItens").innerText = codigo;

  overlay(true);
  const r = await fetch(`${API}?action=listItens&codigo=${codigo}`);
  overlay(false);

  const j = await r.json();
  estado.itens = j.itens || [];

  renderItens();
  show("#modalItens");
}

function renderItens(){
  const tbody = $("#tblItens tbody");

  if(!estado.itens.length){
    tbody.innerHTML = `<tr><td colspan="10" style="padding:10px; color:#666">Nenhum item.</td></tr>`;
    return;
  }

  tbody.innerHTML = estado.itens.map((i,idx)=>`
    <tr>
      <td>${i.itemTR}</td>
      <td>${i.especificacao}</td>
      <td>${i.marca}</td>
      <td>${i.modelo}</td>
      <td>${i.unidade}</td>
      <td>${i.quantMax}</td>
      <td>${i.quantMin}</td>
      <td>${i.valorUnit}</td>
      <td>${i.garantia}</td>
      <td><button class="btn btn-lite" onclick="deleteItem(${idx})">X</button></td>
    </tr>
  `).join("");
}

async function salvarItem(){
  if(!estado.licAtual) return alert("Nenhuma licitação aberta.");

  const body = {
    action:"addItem",
    codigoLicitacao: estado.licAtual,
    itemTR: $("#itTR").value.trim(),
    especificacao: $("#itESP").value.trim(),
    marca: $("#itMARCA").value.trim(),
    modelo: $("#itMODELO").value.trim(),
    unidade: $("#itUN").value.trim(),
    quantMax: $("#itMAX").value.trim(),
    quantMin: $("#itMIN").value.trim(),
    valorUnit: $("#itVLR").value.trim(),
    garantia: $("#itGAR").value.trim()
  };

  overlay(true);
  const r = await fetch(API,{method:"POST",body:JSON.stringify(body)});
  overlay(false);

  const j = await r.json();
  if(j.error) return alert(j.error);

  abrirItens(estado.licAtual);
}

async function deleteItem(idx){
  if(!confirm("Excluir item?")) return;

  overlay(true);
  const r = await fetch(API,{
    method:"POST",
    body:JSON.stringify({action:"deleteItem",codigoLicitacao:estado.licAtual,idx})
  });
  overlay(false);

  const j = await r.json();
  if(j.error) return alert(j.error);

  abrirItens(estado.licAtual);
}

/*******************************************
 *  IMPORTAÇÃO XLS
 *******************************************/
function previewImportacao(ev){
  const file = ev.target.files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = e=>{
    const data = new Uint8Array(e.target.result);
    const wb = XLSX.read(data,{type:"array"});
    const sheet = wb.Sheets[wb.SheetNames[0]];
    estado.preview = XLSX.utils.sheet_to_json(sheet);
    gerarPreviewTabela();
    show("#modalPreview");
  };
  reader.readAsArrayBuffer(file);
}
function gerarPreviewTabela(){
  const tbl = $("#tblPreview");
  if(!estado.preview.length){
    tbl.innerHTML = "<tr><td>Nenhum dado.</td></tr>";
    return;
  }
  const cols = Object.keys(estado.preview[0]);

  tbl.innerHTML =
    `<tr>${cols.map(c=>`<th>${c}</th>`).join("")}</tr>` +
    estado.preview
      .map(r=>`<tr>${cols.map(c=>`<td>${r[c]||""}</td>`).join("")}</tr>`)
      .join("");
}

async function confirmarImportacao(){
  if(!estado.licAtual) return alert("Nenhuma licitação aberta.");
  if(!estado.preview.length) return alert("Prévia vazia.");

  overlay(true);
  const r = await fetch(API,{
    method:"POST",
    body:JSON.stringify({action:"importItens",codigoLicitacao:estado.licAtual,rows:estado.preview})
  });
  overlay(false);

  const j = await r.json();
  if(j.error) return alert(j.error);

  hide("#modalPreview");
  abrirItens(estado.licAtual);
}

/*******************************************
 *  EXPORTAR E PDF
 *******************************************/
async function exportarItens(codigo){
  overlay(true);
  const r = await fetch(`${API}?action=exportItens&codigo=${codigo}`);
  overlay(false);

  const j = await r.json();
  if(!j.url) return alert("Erro ao exportar.");

  window.open(j.url,"_blank");
}
async function gerarPdf(codigo){
  overlay(true);
  const r = await fetch(`${API}?action=gerarPdf&codigo=${codigo}`);
  overlay(false);

  const j = await r.json();
  if(!j.url) return alert("Erro ao gerar PDF.");

  window.open(j.url,"_blank");
}

/*******************************************
 *  MÁSCARAS
 *******************************************/
function maskData(input){
  input.value = input.value
    .replace(/\D/g,"")
    .replace(/(\d{2})(\d)/,"$1/$2")
    .replace(/(\d{2})(\d)/,"$1/$2")
    .replace(/(\d{4}).*/,"$1");
}
$("#inpData").addEventListener("input", e=>maskData(e.target));

function maskCNPJ(input){
  input.value = input.value
    .replace(/\D/g,"")
    .replace(/^(\d{2})(\d)/,"$1.$2")
    .replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")
    .replace(/\.(\d{3})(\d)/,".$1/$2")
    .replace(/(\d{4})(\d)/,"$1-$2")
    .replace(/(-\d{2})\d+$/,"$1");
}
$("#empCnpj").addEventListener("input", e=>maskCNPJ(e.target));

function maskMoney(input){
  let v = input.value.replace(/\D/g,"");
  v = (v/100).toFixed(2);
  v = v.replace(".",",");
  v = v.replace(/\B(?=(\d{3})+(?!\d))/g,".");
  input.value = "R$ "+v;
}
$("#inpValor").addEventListener("input", e=>maskMoney(e.target));
$("#itVLR").addEventListener("input", e=>maskMoney(e.target));

$("#empUf").addEventListener("input", e=>{
  e.target.value = e.target.value.toUpperCase().substring(0,2);
});

[
  "#inpCriterio",
  "#inpModo",
  "#itTR",
  "#itESP",
  "#itMARCA",
  "#itMODELO",
  "#itUN",
  "#itMAX",
  "#itMIN",
  "#itGAR"
].forEach(id=>{
  const el = document.querySelector(id);
  if(el){
    el.addEventListener("input", e=>{
      e.target.value = e.target.value.toUpperCase();
    });
  }
});

/*******************************************
 *  EFEITOS
 *******************************************/
document.addEventListener("mousedown", e=>{
  if(e.target.classList.contains("btn"))
    e.target.style.transform="scale(.97)";
});
document.addEventListener("mouseup", e=>{
  if(e.target.classList.contains("btn"))
    e.target.style.transform="scale(1)";
});

$$("input").forEach((inp,i,arr)=>{
  inp.addEventListener("keydown", e=>{
    if(e.key==="Enter"){
      e.preventDefault();
      if(arr[i+1]) arr[i+1].focus();
    }
  });
});
</script>
</body>
</html>
